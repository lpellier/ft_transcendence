*   Trying 10.52.1.76:443...
* TCP_NODELAY set
* Connected to signin.intra.42.fr (10.52.1.76) port 443 (#0)
* ALPN, offering h2
* ALPN, offering http/1.1
* successfully set certificate verify locations:
*   CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: /etc/ssl/certs
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [512 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4007 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256
* ALPN, server accepted to use h2
* Server certificate:
*  subject: CN=*.intra.42.fr
*  start date: Sep 27 00:00:00 2021 GMT
*  expire date: Sep 30 23:59:59 2022 GMT
*  subjectAltName: host "signin.intra.42.fr" matched cert's "*.intra.42.fr"
*  issuer: C=US; O=DigiCert Inc; CN=RapidSSL TLS DV RSA Mixed SHA256 2020 CA-1
*  SSL certificate verify ok.
* Using HTTP2, server supports multi-use
* Connection state changed (HTTP/2 confirmed)
* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0
} [5 bytes data]
* Using Stream ID: 1 (easy handle 0x556eb2efd2f0)
} [5 bytes data]
> POST /users/sign_in HTTP/2
> Host: signin.intra.42.fr
> user-agent: curl/7.68.0
> accept: */*
> cookie: _intra_42_session_production=7c5fbf397adb0a74c46cd8027260fb8f
> content-length: 172
> content-type: application/x-www-form-urlencoded
> 
{ [5 bytes data]
* Connection state changed (MAX_CONCURRENT_STREAMS == 128)!
} [5 bytes data]
* We are completely uploaded and fine
{ [5 bytes data]
< HTTP/2 302 
< server: nginx
< date: Wed, 01 Jun 2022 17:46:09 GMT
< content-type: text/html; charset=utf-8
< location: https://profile.intra.42.fr
< status: 302 Found
< x-frame-options: SAMEORIGIN
< x-xss-protection: 1; mode=block
< x-content-type-options: nosniff
* Added cookie _mkra_stck="6bb3259582d6b2bddc3e1d553bfbf743%3A1654105574.6441977" for domain signin.intra.42.fr, path /, expire 1654105579
< set-cookie: _mkra_stck=6bb3259582d6b2bddc3e1d553bfbf743%3A1654105574.6441977; path=/; HTTPOnly; Secure; max-age=10; expires=Wed, 01 Jun 2022 17:46:19 -0000; HttpOnly
* Added cookie user.id="NjA0NzA%3D--6e7d6462f17ac3f01fbe2dd1741f1bf1c4cdcc9c" for domain signin.intra.42.fr, path /, expire 0
< set-cookie: user.id=NjA0NzA%3D--6e7d6462f17ac3f01fbe2dd1741f1bf1c4cdcc9c; path=/; HTTPOnly; Secure
* Added cookie pro.id="bnVsbA%3D%3D--af7657a8234901541e1115b23c7a73d93a7191fd" for domain signin.intra.42.fr, path /, expire 0
< set-cookie: pro.id=bnVsbA%3D%3D--af7657a8234901541e1115b23c7a73d93a7191fd; path=/; HTTPOnly; Secure
* Replaced cookie _intra_42_session_production="c31a8f4c54ae3e427d3e02e666fc6a5e" for domain intra.42.fr, path /, expire 1654710369
< set-cookie: _intra_42_session_production=c31a8f4c54ae3e427d3e02e666fc6a5e; domain=intra.42.fr; path=/; HTTPOnly; Secure; expires=Wed, 08 Jun 2022 17:46:09 -0000; HttpOnly
< cache-control: no-cache
< x-request-id: 9679eb01-48d4-4ffa-b9b5-a3828411719b
< x-runtime: 0.092405
< vary: Origin,Accept-Encoding
< x-rack-cors: preflight-hit; no-origin
< front-end-https: on
< strict-transport-security: max-age=15552001; includeSubDomains;
< 
* Ignoring the response-body
{ [93 bytes data]
* Connection #0 to host signin.intra.42.fr left intact
* Issue another request to this URL: 'https://profile.intra.42.fr/'
* Switch from POST to GET
*   Trying 10.52.1.76:443...
* TCP_NODELAY set
* Connected to profile.intra.42.fr (10.52.1.76) port 443 (#1)
* ALPN, offering h2
* ALPN, offering http/1.1
* successfully set certificate verify locations:
*   CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: /etc/ssl/certs
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [512 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4007 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256
* ALPN, server accepted to use h2
* Server certificate:
*  subject: CN=*.intra.42.fr
*  start date: Sep 27 00:00:00 2021 GMT
*  expire date: Sep 30 23:59:59 2022 GMT
*  subjectAltName: host "profile.intra.42.fr" matched cert's "*.intra.42.fr"
*  issuer: C=US; O=DigiCert Inc; CN=RapidSSL TLS DV RSA Mixed SHA256 2020 CA-1
*  SSL certificate verify ok.
* Using HTTP2, server supports multi-use
* Connection state changed (HTTP/2 confirmed)
* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0
} [5 bytes data]
* Using Stream ID: 1 (easy handle 0x556eb2efd2f0)
} [5 bytes data]
> GET / HTTP/2
> Host: profile.intra.42.fr
> user-agent: curl/7.68.0
> accept: */*
> cookie: _intra_42_session_production=c31a8f4c54ae3e427d3e02e666fc6a5e
> 
{ [5 bytes data]
* Connection state changed (MAX_CONCURRENT_STREAMS == 128)!
} [5 bytes data]
< HTTP/2 200 
< server: nginx
< date: Wed, 01 Jun 2022 17:46:10 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< status: 200 OK
< x-frame-options: SAMEORIGIN
< x-xss-protection: 1; mode=block
< x-content-type-options: nosniff
< etag: W/"a5a95b4e7eda3d9eea9ef2ed8a3a2f5b"
< cache-control: max-age=0, private, must-revalidate
* Added cookie user.id="NjA0NzA%3D--6e7d6462f17ac3f01fbe2dd1741f1bf1c4cdcc9c" for domain profile.intra.42.fr, path /, expire 0
< set-cookie: user.id=NjA0NzA%3D--6e7d6462f17ac3f01fbe2dd1741f1bf1c4cdcc9c; path=/; HTTPOnly; Secure
* Added cookie locale="en" for domain profile.intra.42.fr, path /, expire 0
< set-cookie: locale=en; path=/; HTTPOnly; Secure
< x-request-id: ad40342b-7671-4194-93b4-940f83b2d702
< x-runtime: 0.398260
< vary: Origin,Accept-Encoding
< x-rack-cors: preflight-hit; no-origin
< front-end-https: on
< strict-transport-security: max-age=15552001; includeSubDomains;
< 
{ [15859 bytes data]
* Connection #1 to host profile.intra.42.fr left intact
before auth
*   Trying 127.0.0.1:3001...
* TCP_NODELAY set
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0* Connected to 127.0.0.1 (127.0.0.1) port 3001 (#0)
> GET /auth HTTP/1.1
> Host: 127.0.0.1:3001
> User-Agent: curl/7.68.0
> Accept: */*
> 
* Mark bundle as not supporting multiuse
< HTTP/1.1 302 Found
< X-Powered-By: Express
< Access-Control-Allow-Origin: http://127.0.0.1:3000
< Vary: Origin
< Location: https://api.intra.42.fr/oauth/authorize?response_type=code&redirect_uri=http%3A%2F%2F127.0.0.1%3A3001%2Fauth&client_id=599878db9c7f713d0988e2c1e2672a5d888593be77d49fed8bec54b4b1d404bc
< Content-Length: 0
< Date: Wed, 01 Jun 2022 17:46:10 GMT
< Connection: keep-alive
< Keep-Alive: timeout=5
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host 127.0.0.1 left intact
* Clear auth, redirects to port from 3001 to 443Issue another request to this URL: 'https://api.intra.42.fr/oauth/authorize?response_type=code&redirect_uri=http%3A%2F%2F127.0.0.1%3A3001%2Fauth&client_id=599878db9c7f713d0988e2c1e2672a5d888593be77d49fed8bec54b4b1d404bc'
*   Trying 163.172.250.56:443...
* TCP_NODELAY set
* Connected to api.intra.42.fr (163.172.250.56) port 443 (#1)
* ALPN, offering h2
* ALPN, offering http/1.1
* successfully set certificate verify locations:
*   CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: /etc/ssl/certs
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [512 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [122 bytes data]
* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):
{ [15 bytes data]
* TLSv1.3 (IN), TLS handshake, Certificate (11):
{ [4014 bytes data]
* TLSv1.3 (IN), TLS handshake, CERT verify (15):
{ [264 bytes data]
* TLSv1.3 (IN), TLS handshake, Finished (20):
{ [36 bytes data]
* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.3 (OUT), TLS handshake, Finished (20):
} [36 bytes data]
* SSL connection using TLSv1.3 / TLS_AES_128_GCM_SHA256
* ALPN, server accepted to use h2
* Server certificate:
*  subject: CN=*.intra.42.fr
*  start date: Sep 27 00:00:00 2021 GMT
*  expire date: Sep 30 23:59:59 2022 GMT
*  subjectAltName: host "api.intra.42.fr" matched cert's "*.intra.42.fr"
*  issuer: C=US; O=DigiCert Inc; CN=RapidSSL TLS DV RSA Mixed SHA256 2020 CA-1
*  SSL certificate verify ok.
* Using HTTP2, server supports multi-use
* Connection state changed (HTTP/2 confirmed)
* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0
} [5 bytes data]
* Using Stream ID: 1 (easy handle 0x55c6db35e2f0)
} [5 bytes data]
> GET /oauth/authorize?response_type=code&redirect_uri=http%3A%2F%2F127.0.0.1%3A3001%2Fauth&client_id=599878db9c7f713d0988e2c1e2672a5d888593be77d49fed8bec54b4b1d404bc HTTP/2
> Host: api.intra.42.fr
> user-agent: curl/7.68.0
> accept: */*
> cookie: _intra_42_session_production=c31a8f4c54ae3e427d3e02e666fc6a5e
> 
{ [5 bytes data]
* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
{ [130 bytes data]
* Connection state changed (MAX_CONCURRENT_STREAMS == 250)!
} [5 bytes data]
< HTTP/2 302 
< cache-control: no-cache
< content-type: text/html; charset=utf-8
< date: Wed, 01 Jun 2022 17:46:10 GMT
< location: http://127.0.0.1:3001/auth?code=bea5116dd38079a6722534828c324c22085d464006762ded35508662bd3a2308
* Added cookie _mkra_stck="15e20a8020c702e70007eb1e185a06fb%3A1654105575.1539168" for domain api.intra.42.fr, path /, expire 1654105580
< set-cookie: _mkra_stck=15e20a8020c702e70007eb1e185a06fb%3A1654105575.1539168; path=/; max-age=10; expires=Wed, 01 Jun 2022 17:46:20 -0000; HttpOnly
< status: 302 Found
< vary: Origin,Accept-Encoding
< x-content-type-options: nosniff
< x-frame-options: SAMEORIGIN
< x-rack-cors: preflight-hit; no-origin
< x-request-id: 14e52ce8-4b4f-41a6-ae5d-4e6e93c4ffc7
< x-runtime: 0.040866
< x-xss-protection: 1; mode=block
< 
{ [5 bytes data]
* Ignoring the response-body
{ [162 bytes data]
100   162    0   162    0     0   2347      0 --:--:-- --:--:-- --:--:--  2347
* Connection #1 to host api.intra.42.fr left intact
* Clear auth, redirects to port from 443 to 3001Issue another request to this URL: 'http://127.0.0.1:3001/auth?code=bea5116dd38079a6722534828c324c22085d464006762ded35508662bd3a2308'
* Found bundle for host 127.0.0.1: 0x55c6db354600 [serially]
* Can not multiplex, even if we wanted to!
* Re-using existing connection! (#0) with host 127.0.0.1
* Connected to 127.0.0.1 (127.0.0.1) port 3001 (#0)
> GET /auth?code=bea5116dd38079a6722534828c324c22085d464006762ded35508662bd3a2308 HTTP/1.1
> Host: 127.0.0.1:3001
> User-Agent: curl/7.68.0
> Accept: */*
> 
* Mark bundle as not supporting multiuse
< HTTP/1.1 200 OK
< X-Powered-By: Express
< Access-Control-Allow-Origin: http://127.0.0.1:3000
< Vary: Origin
* Added cookie jwt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImJvbG1vcy1vIiwic3ViIjo2MDQ3MCwiaWF0IjoxNjU0MTA1NTcwLCJleHAiOjE2NTQxMDkxNzB9.j1BH97Z_Yw32_JBcrpf-kw3vuygeOOdlq0TC49rjk0M" for domain 127.0.0.1, path /, expire 0
< Set-Cookie: jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImJvbG1vcy1vIiwic3ViIjo2MDQ3MCwiaWF0IjoxNjU0MTA1NTcwLCJleHAiOjE2NTQxMDkxNzB9.j1BH97Z_Yw32_JBcrpf-kw3vuygeOOdlq0TC49rjk0M; Path=/
< Content-Type: application/json; charset=utf-8
< Content-Length: 192
< ETag: W/"c0-t5mRzHYkzSELecZD7/c+o3fzH+o"
< Date: Wed, 01 Jun 2022 17:46:10 GMT
< Connection: keep-alive
< Keep-Alive: timeout=5
< 
{ [192 bytes data]
100   192  100   192    0     0    375      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host 127.0.0.1 left intact
before me
*   Trying 127.0.0.1:3001...
* TCP_NODELAY set
* Connected to 127.0.0.1 (127.0.0.1) port 3001 (#0)
> GET /users/me HTTP/1.1
> Host: 127.0.0.1:3001
> User-Agent: curl/7.68.0
> Accept: */*
> Cookie: jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImJvbG1vcy1vIiwic3ViIjo2MDQ3MCwiaWF0IjoxNjU0MTA1NTcwLCJleHAiOjE2NTQxMDkxNzB9.j1BH97Z_Yw32_JBcrpf-kw3vuygeOOdlq0TC49rjk0M
> 
* Mark bundle as not supporting multiuse
< HTTP/1.1 200 OK
< X-Powered-By: Express
< Access-Control-Allow-Origin: http://127.0.0.1:3000
< Vary: Origin
< Content-Type: application/json; charset=utf-8
< Content-Length: 100
< ETag: W/"64-TeT+jcf0cfcBw6JfPrqwNR0qd4k"
< Date: Wed, 01 Jun 2022 17:46:10 GMT
< Connection: keep-alive
< Keep-Alive: timeout=5
< 
* Connection #0 to host 127.0.0.1 left intact
{"id":60470,"username":"bolmos-o","avatar":"https://cdn.intra.42.fr/users/bolmos-o.jpg","tfa":false}%  